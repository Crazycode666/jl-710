# 编码节点参数配置

## 一、可视化工具编码节点配置
### 配置方式：<br>
+ 根据应用方案，在侧边栏的`编码器`节点拖到需要编码的数据流框图中，并点击节点中间的配置按钮，打开编码参数配置界面，<br>
![编码节点配置](./assets/encoder_node_flow/Encoder_node_0.png)<br>
编码节点提供多种参数可配，包括声道、 位宽、帧长、采样率、码率和编码格式，这参数对于不同的编码格式，有些配置是不需要的，也不会生效。可以根据具体的格式，配置相关的参数，采样率和编码格式。需要注意的是，编码参数的声道类型，位宽，采样率等参数需要与需要编码的pcm 数据对应。编码帧长，码率则决定编码出来一帧数据的长度及编码的品质。通过可视化节点的配置，参数仅支持以上几种，如果需要配置其他参数，比如opus 的编码复杂度等，需要通过sdk的数据流节点的参数配置进行设置。同时，可以选择AUTO，通过数据流初始化时配置编码参数，在下一章节会讲到。<br>

### 应用场景：<br>
+ 对于一些录音成文件的编码格式，可视化节点的参数配置完全可以实现所有的参数配置，并且已经明确了具体的格式和参数，通常采用直接在可视化的编码节点，例如MP3，wav等<br>
![编码节点配置](./assets/encoder_node_flow/file_encoder_config.png)

+ 对于固定参数进行无线传输时，并且使用的格式所有参数均可以均可以通过节点配置，则可以选择这种方式进行配置,<br>
![编码节点配置](./assets/encoder_node_flow/encoder_lc3.png)

## 二、数据流配置编码参数
+ 上述可视化工具节点配置可以简单配置编码参数，但是，并不能满足所有的应用场景，SDK提供配置设置编码节点的接口，使用更加灵活，<br>
### 配置方式：<br>
+ 1 ) 在创建数据流时，编码节点会首先读取节点的配置，获取节点的配置参数，然后，在数据流start之前，可以通过节点ioctl 接口将编码参数设置到编码节点，如下图所示：同时支持多种复杂私有参数配置，并且会覆盖掉原本从节点读取的参数配置。使用更加灵活，但是需要掌握配置流程。<br>
![编码节点配置](./assets/encoder_node_flow/encoder_node_config.png)
+  2 ) 在未向编码节点设置具体参数是，也可以通过数据流参数协商的方式，通过配置终节点的参数，使用音频流程的参数协商，将编码参数配置给编码节点。但是，需要注意的是，使用这种方式，仅能配置参与协商的部分参数，包括，编码格式，采样率，位宽和声道，并且这种配置方式并不能覆盖从可视化节点的读出来的配置，所以，对应的参数需要选择`auto` 的配置，比如，ESCO通话时，需要根据蓝牙协商的参数确定编码格式及参数，如下图所示：<br>
![编码节点配置](./assets/encoder_node_flow/esco_encoder_config.png)
